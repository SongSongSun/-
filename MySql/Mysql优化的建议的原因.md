# Mysql优化的建议的原因

1. 为什么建议使用自增主键

    主要是由于MySql 的B+树索引性质决定的，MySQL 的默认存储引擎 InnoDB 使用 B+ 树来存储数据的。

    - 使用自增主键

        ![img](https://user-gold-cdn.xitu.io/2020/5/23/17241c0c7df4ebdd?imageslim)

        两个特点

        - 自增的数据插入影响的范围永远只有最右的子树，要么直接在子树插入节点，要么就是子树分裂，影响其父节点。

        - 除了最右子树，其他子树的节点都是满的。

            由于每次插入影响的节点只有最右子树，那么磁盘 IO 的范围就可控；**最重要一点是除最右子树，其他子树的节点都是满的，这种情况，叶子节点数据的物理连续性会更好，** 根据[局部性原理](https://baike.baidu.com/item/局部性原理),查询性能也会更高。

    - 使用非自增主键

        ![img](https://user-gold-cdn.xitu.io/2020/5/23/17241c0c58a77452?imageslim)

        - 插入影响的节点不可控，无法预知

        - 每个子树都存在叶子节点不满的情况

            由于插入数据影响节点不可控，导致节点分裂的情况就会更频繁，节点分裂也是 IO 操作，性能自然受到影响。子树的叶子节点不满，会导致叶子节点物理连续性不好。最后如果我们是UUID的话，Id 过长，会占用节点空间，每个页能存储的节点变少，页分裂变多，性能也会受到影响。这也是为什么建议使用自增主键的原因。

    

2. 为什么不要使用Select * 查询

    我们能想到很直观的理由就是：数据库要帮你翻译成每个字段名去查询，接着查询多余的字段会占用内存，带宽等资源。这确实是一个理由，而且这个理由很重要，但是我这里想说的是另外一个原因，**覆盖索引**。

    覆盖索引是很好的优化技巧，可以让查询直接通过索引返回数据，而不用回表，减少IO，提升性能。